# Notions Words 插件验证指南

## 🚀 第一步：构建Chrome扩展

### 1.1 构建生产版本
```bash
# 确保在项目根目录
cd /Users/liuwei/Github/notions-words

# 安装依赖（如果还没有安装）
npm install

# 构建扩展
npm run build
```

构建完成后，`dist` 目录将包含可安装的Chrome扩展文件。

### 1.2 验证构建文件
检查 `dist` 目录是否包含以下关键文件：
- ✅ `manifest.json` - 扩展清单文件
- ✅ `background.js` - 后台脚本
- ✅ `content.js` - 内容脚本
- ✅ `popup.html` - 弹窗页面
- ✅ `options.html` - 设置页面
- ✅ `icons/` - 图标文件

## 🔧 第二步：在Chrome中安装插件

### 2.1 打开Chrome扩展管理页面
1. 打开Chrome浏览器
2. 在地址栏输入：`chrome://extensions/`
3. 或者：菜单 → 更多工具 → 扩展程序

### 2.2 启用开发者模式
1. 在扩展页面右上角，打开"开发者模式"开关
2. 页面会显示额外的开发者选项

### 2.3 加载扩展
1. 点击"加载已解压的扩展程序"按钮
2. 选择项目的 `dist` 目录
3. 点击"选择文件夹"

### 2.4 验证安装成功
- ✅ 扩展出现在扩展列表中
- ✅ 状态显示为"已启用"
- ✅ 工具栏出现插件图标（如果固定到工具栏）

## 🧪 第三步：功能验证测试

### 3.1 基础功能测试

#### 测试1：插件界面测试
1. **弹窗测试**：
   - 点击工具栏中的插件图标
   - 验证弹窗正常打开
   - 检查界面是否美观、响应式

2. **设置页面测试**：
   - 右键点击插件图标 → 选项
   - 或在扩展管理页面点击"详细信息" → "扩展程序选项"
   - 验证设置页面正常加载

#### 测试2：文本选择功能
1. **打开测试页面**：
   ```bash
   # 在浏览器中打开测试页面
   file:///Users/liuwei/Github/notions-words/tests/test-page.html
   ```

2. **选择单词测试**：
   - 选中页面上的英文单词（如 "hello", "computer"）
   - 观察是否有翻译提示出现
   - 测试不同长度的文本选择

#### 测试3：翻译功能验证
1. **单词翻译**：
   - 选择 "hello" → 应显示 "你好"
   - 选择 "computer" → 应显示 "计算机"
   - 选择 "programming" → 应显示 "编程"

2. **短语翻译**：
   - 选择 "How are you?" → 应显示中文翻译
   - 测试长句子翻译

3. **翻译界面交互**：
   - 测试复制翻译结果
   - 测试保存到Notion功能
   - 测试关闭翻译卡片

### 3.2 高级功能测试

#### 测试4：配置管理
1. **语言设置**：
   - 打开设置页面
   - 更改目标语言（中文/日文/英文）
   - 保存设置并测试翻译是否按新语言显示

2. **翻译提供商设置**：
   - 在设置中选择不同的翻译服务
   - 测试切换是否生效

#### 测试5：Notion集成（可选）
如果您有Notion账户，可以测试：
1. 在设置中配置Notion API密钥
2. 设置数据库ID
3. 翻译单词后点击"保存到Notion"
4. 检查Notion数据库是否收到新记录

#### 测试6：缓存和性能
1. **缓存测试**：
   - 翻译同一个单词多次
   - 第二次应该更快（使用缓存）

2. **性能测试**：
   - 快速选择多个不同单词
   - 观察响应速度和稳定性

### 3.3 错误处理测试

#### 测试7：网络错误处理
1. **断网测试**：
   - 断开网络连接
   - 尝试翻译新单词
   - 观察错误提示是否友好

2. **API限制测试**：
   - 快速连续翻译多个单词
   - 测试是否有适当的限流处理

#### 测试8：边界情况
1. **特殊字符**：
   - 选择包含特殊符号的文本
   - 选择数字、标点符号
   - 选择表情符号

2. **长文本**：
   - 选择非常长的段落
   - 测试插件是否能正确处理

## 🔍 第四步：深度功能验证

### 4.1 在真实网站测试
推荐在以下网站测试插件：

1. **英文新闻网站**：
   - CNN.com
   - BBC.com
   - 选择文章中的单词和句子

2. **技术文档**：
   - GitHub.com
   - StackOverflow.com
   - 测试技术术语翻译

3. **社交媒体**：
   - Twitter.com
   - Reddit.com
   - 测试非正式语言翻译

### 4.2 多标签页测试
1. 打开多个标签页
2. 在不同标签页中同时使用翻译功能
3. 验证功能是否正常且不相互干扰

### 4.3 浏览器重启测试
1. 关闭浏览器
2. 重新打开Chrome
3. 验证插件设置是否保持
4. 测试功能是否正常

## 📋 验证清单

### 必须通过的测试项目
- [ ] 插件成功安装和启用
- [ ] 弹窗界面正常显示
- [ ] 设置页面可以打开
- [ ] 文本选择检测正常
- [ ] 基础翻译功能工作
- [ ] 翻译结果显示正确
- [ ] 复制功能正常
- [ ] 设置可以保存
- [ ] 缓存机制生效
- [ ] 错误处理适当

### 推荐验证的项目
- [ ] Notion集成功能
- [ ] 多语言翻译切换
- [ ] 不同翻译提供商切换
- [ ] 长文本处理
- [ ] 特殊字符处理
- [ ] 多标签页兼容性
- [ ] 浏览器重启后功能恢复

## 🐛 常见问题排查

### 问题1：插件无法加载
**解决方案**：
1. 检查 `dist` 目录是否完整
2. 重新运行 `npm run build`
3. 检查Chrome版本是否支持Manifest V3

### 问题2：翻译不显示
**解决方案**：
1. 检查网络连接
2. 打开Chrome开发者工具查看错误
3. 验证API配置是否正确

### 问题3：设置无法保存
**解决方案**：
1. 检查Chrome存储权限
2. 重新安装插件
3. 清除浏览器缓存

### 问题4：在某些网站不工作
**解决方案**：
1. 检查网站的CSP（内容安全策略）
2. 尝试刷新页面
3. 检查插件权限设置

## 🎯 验证完成标志

当您完成以下测试后，说明插件验证成功：

1. ✅ 在至少3个不同网站成功翻译文本
2. ✅ 翻译结果准确且界面友好
3. ✅ 设置功能正常工作
4. ✅ 错误情况下有适当提示
5. ✅ 性能表现良好，响应迅速

## 📞 获取帮助

如果在验证过程中遇到问题：

1. **查看浏览器控制台**：
   - 按 F12 打开开发者工具
   - 查看 Console 和 Network 标签页的错误信息

2. **检查扩展错误**：
   - 在 `chrome://extensions/` 页面点击"详细信息"
   - 查看"检查视图"中的错误

3. **重新构建**：
   ```bash
   # 清理并重新构建
   rm -rf dist/
   npm run build
   ```

---

**祝您验证顺利！** 🎉

如果所有测试都通过，您就拥有了一个功能完整的浏览器翻译插件！ 